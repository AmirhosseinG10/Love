<!doctype html>
<html lang="fa" dir="rtl">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>داستان تعاملی — یک سورپرایز برای سایه</title>
    <!-- Bootstrap 5 CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.rtl.min.css" rel="stylesheet">
    <link rel="stylesheet" href="assets/css/public.css">
    <style>
        :root {
            --accent: #f6c84c;
            --accent-dark: #e6b33a
        }

        body {
            background: linear-gradient(180deg, #fff9c4 0%, #fff2b8 100%);
            font-family: "Iranian-Sans", sans-serif;
        }

        .card-choice {
            cursor: pointer;
            transition: transform .18s ease, box-shadow .18s ease
        }

        .card-choice:hover {
            transform: translateY(-6px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, .12)
        }

        .hidden {
            display: none
        }

        .sun-emoji {
            font-size: 2.4rem
        }

        .flower-icon {
            font-size: 2.2rem
        }

        .fade-in {
            animation: fadeIn .6s ease both
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(8px)
            }

            to {
                opacity: 1;
                transform: none
            }
        }

        .choice-btn {
            background: linear-gradient(90deg, var(--accent), var(--accent-dark));
            color: #222;
            border: none
        }

        .choice-btn:focus {
            box-shadow: none
        }

        .story-area {
            min-height: 260px
        }

        footer {
            position: fixed;
            left: 1rem;
            bottom: 1rem
        }
    </style>
</head>

<body>
    <div class="container py-5">
        <div class="row justify-content-center">
            <div class="col-12 col-md-9 col-lg-7">
                <div class="card mb-3 border-0 shadow-sm">
                    <div class="card-body text-center">
                        <h1 class="card-title mb-1">💫 یک سورپرایز برای سایه</h1>
                        <p class="text-muted mb-3">یک داستان تعاملی کوتاه: انتخاب‌های تو مسیر داستان رو شکل می‌ده. هر
                            راه به یک پیام عاشقانه ختم می‌شه.</p>
                        <div id="stage" class="story-area">
                            <!-- مرحله اولیه -->
                            <div id="intro" class="fade-in">
                                <p class="lead">روزی یک پسر تصمیم گرفت عشقش رو سورپرایز کنه... حالا چی کار کنه؟</p>
                                <div class="row g-3 mt-3">
                                    <div class="col-12 col-md-4">
                                        <div class="card card-choice h-100" data-choice="flower">
                                            <div class="card-body">
                                                <div class="flower-icon">🌻</div>
                                                <h5 class="card-title mt-2">براش گل بخره</h5>
                                                <p class="card-text text-muted small">یه هدیهٔ ساده اما دلنشین.</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-12 col-md-4">
                                        <div class="card card-choice h-100" data-choice="site">
                                            <div class="card-body">
                                                <div class="flower-icon">💻</div>
                                                <h5 class="card-title mt-2">یه سایت بسازه</h5>
                                                <p class="card-text text-muted small">آینده‌نگر؛ چیزی که همیشه بمونِ.
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-12 col-md-4">
                                        <div class="card card-choice h-100" data-choice="poem">
                                            <div class="card-body">
                                                <div class="flower-icon">✍️</div>
                                                <h5 class="card-title mt-2">یه شعر بنویسه</h5>
                                                <p class="card-text text-muted small">واژه‌ها قلب رو نرم می‌کنن.</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- بخش‌های مسیرها -->
                            <div id="branch-flower" class="hidden">
                                <div class="mb-3 fade-in">
                                    <h4>🌻 انتخاب: گل</h4>
                                    <p class="text-muted">او گل را گرفت؛ اما می‌خواست این گل ویژه باشد. چه نوع گلی بخرد؟
                                    </p>
                                </div>
                                <div class="row g-3">
                                    <div class="col-6">
                                        <button class="btn choice-btn w-100" data-next="flower-1">گل آفتابگردون</button>
                                    </div>
                                    <div class="col-6">
                                        <button class="btn choice-btn w-100" data-next="flower-2">گل رز قرمز</button>
                                    </div>
                                    <div class="col-6 mt-2">
                                        <button class="btn btn-outline-dark w-100" data-next="flower-3">سبد گل
                                            کوچک</button>
                                    </div>
                                    <div class="col-6 mt-2">
                                        <button class="btn btn-outline-dark w-100" data-next="flower-4">دست‌ساز
                                            (کاغذی)</button>
                                    </div>
                                </div>
                            </div>

                            <div id="branch-site" class="hidden">
                                <div class="mb-3 fade-in">
                                    <h4>💻 انتخاب: سایت</h4>
                                    <p class="text-muted">او سایت را ساخت؛ حالا چه محتوایی را در صفحه اول قرار دهد؟</p>
                                </div>
                                <div class="row g-3">
                                    <div class="col-6"><button class="btn choice-btn w-100" data-next="site-1">۱۵۰ دلیل
                                            عاشقانه</button></div>
                                    <div class="col-6"><button class="btn choice-btn w-100" data-next="site-2">گالری
                                            عکس‌ها</button></div>
                                    <div class="col-6 mt-2"><button class="btn btn-outline-dark w-100"
                                            data-next="site-3">ویدیو خاطرات</button></div>
                                    <div class="col-6 mt-2"><button class="btn btn-outline-dark w-100"
                                            data-next="site-4">بازی تعاملی</button></div>
                                </div>
                            </div>

                            <div id="branch-poem" class="hidden">
                                <div class="mb-3 fade-in">
                                    <h4>✍️ انتخاب: شعر</h4>
                                    <p class="text-muted">او شروع به نوشتن کرد. چه لحن و سبک شعری را انتخاب کند؟</p>
                                </div>
                                <div class="row g-3">
                                    <div class="col-6"><button class="btn choice-btn w-100" data-next="poem-1">رمانتیک
                                            کلاسیک</button></div>
                                    <div class="col-6"><button class="btn choice-btn w-100" data-next="poem-2">شعر کوتاه
                                            مدرن</button></div>
                                    <div class="col-6 mt-2"><button class="btn btn-outline-dark w-100"
                                            data-next="poem-3">شعر کودکانه شاد</button></div>
                                    <div class="col-6 mt-2"><button class="btn btn-outline-dark w-100"
                                            data-next="poem-4">رباعی مختصر</button></div>
                                </div>
                            </div>

                            <!-- صفحات نتیجه‌ای که همه به یک پیام می‌رسند -->
                            <template id="result-template">
                                <div class="fade-in text-center">
                                    <h3 id="result-title"></h3>
                                    <p id="result-text" class="text-muted"></p>
                                    <div class="my-3">
                                        <div style="font-size:3rem">🌻</div>
                                    </div>
                                    <p class="small text-muted">می‌توانید این داستان را دوباره بازی کنید یا آن را با
                                        سایه به اشتراک بگذارید.</p>
                                    <div class="d-flex justify-content-center gap-2 mt-2">
                                        <button id="restart" class="btn btn-outline-dark">تکرار</button>
                                        <button id="share" class="btn choice-btn">کپی لینک (نسخه محلی)</button>
                                    </div>
                                </div>
                            </template>

                        </div>
                    </div>
                </div>

                <div class="text-center text-muted small">طراحی شده با ❤️ برای سایه
                </div>
            </div>
        </div>
    </div>

    <footer>
        <div class="badge bg-white text-dark">نسخه آزمایشی — امیر</div>
    </footer>

    <script>
        // ساده نگه داشتن منطق داستان
        const stage = document.getElementById('stage');
        const intro = document.getElementById('intro');
        const branches = {
            flower: document.getElementById('branch-flower'),
            site: document.getElementById('branch-site'),
            poem: document.getElementById('branch-poem')
        };

        // نگهداری مسیر انتخاب‌ها
        const path = [];

        // کلیک روی انتخاب اولیه
        document.querySelectorAll('.card-choice').forEach(el => {
            el.addEventListener('click', () => {
                const choice = el.getAttribute('data-choice');
                path.push(choice);
                intro.classList.add('hidden');
                Object.values(branches).forEach(b => b.classList.add('hidden'));
                branches[choice].classList.remove('hidden');
            });
        });

        // مدیریت دکمه‌های داخلی
        stage.addEventListener('click', e => {
            const btn = e.target.closest('[data-next]');
            if (!btn) return;
            const next = btn.getAttribute('data-next');
            path.push(next);

            // تصمیم‌گیری برای نتیجه نهایی (می‌توانی این بخش را گسترش بدی)
            const resultTitle = document.getElementById('result-title');
            const resultText = document.getElementById('result-text');

            // ساده‌سازی: بر اساس کلید آخر پیام نهایی تولید میشه
            if (next.startsWith('flower')) {
                resultTitle.textContent = 'یک سبد از آفتابِ کوچک';
                resultText.textContent = 'تو گل آفتابگردون رو انتخاب کردی — چون او همیشه خورشید زندگیته. این حسِ گرم و مطمئن، همیشه باهات میمونه.';
            } else if (next.startsWith('site')) {
                resultTitle.textContent = 'یادگاریِ جاودان';
                resultText.textContent = 'تو یک سایت ساختی که ۱۵۰ دلیل یا گالری خاطرات رو نگه می‌داره — چیزی که همیشه می‌تونه عشق رو به یاد بیاره.';
            } else if (next.startsWith('poem')) {
                resultTitle.textContent = 'کلماتِ قلبی';
                resultText.textContent = 'تو شعری نوشتی که مستقیم از قلب گفت — کلماتی که همیشه می‌تونه یک لحظه ساده رو جادویی کنه.';
            } else {
                resultTitle.textContent = 'یک هدیهٔ ساده و بزرگ';
                resultText.textContent = 'هر انتخابی که کردی، نشان‌دهندهٔ عشق و توجهته — همین کافیه.';
            }

            // نمایش نتیجه
            stage.innerHTML = '';
            const tpl = document.getElementById('result-template');
            stage.appendChild(tpl.content.cloneNode(true));

            // دکمه‌ها
            document.getElementById('restart').addEventListener('click', () => location.reload());
            document.getElementById('share').addEventListener('click', () => {
                navigator.clipboard && navigator.clipboard.writeText(location.href);
                alert('لینک صفحه (آدرس محلی) کپی شد — اگر فایل رو آپلود کنی می‌تونی این لینک رو به اشتراک بذاری.');
            });
        });
    </script>
</body>

</html>